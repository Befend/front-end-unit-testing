## 测试替身

### 目标

- 理解测试替身解决的问题
- 有哪些外部依赖

### 大纲

- 解决的问题
- 外部依赖
  - 时间
  - 随机数
  - 基础设施
  - 现存数据
  - 持久化
  - 网络

### 目的

将被测试代码与周围隔离开，掌控一切

- 加速执行测试
- 使执行变得确定
- 模拟特殊情况
- 暴露隐藏的信息

### 测试替身的类型

- 占位符(哑元对象)
  类型报错

- stub(测试桩)
  隔离依赖，更简单控制 - 这个对象只有一部分行为是你关心的，不需要去处理和理解整个对象的复杂行为

- spy(测试间谍)
  记录它被调用的方式和次数 - 不会改变原有方法的行为

- Mock(模拟对象)
  隔离依赖，控制代码行为，验证代码行为 - stub 和 spy 的结合体

- Fake(伪造对象)
  真实对象的简化版 - 替代那些在测试环境中难以创建或者过于复杂耗时的真实对象
